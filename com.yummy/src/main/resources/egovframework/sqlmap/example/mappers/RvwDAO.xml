<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
  "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="egovframework.rvw.dao.RvwDAO">
  <!-- 
  <select id="selectAll" resultType="rvw">
    SELECT 
      rvw_no,
      rst_no,
      id,
      cont,
      cdt,
      score
    FROM rvw
    WHERE 1
  </select>
   -->
  <insert id="save" parameterType="rvw" >
    INSERT INTO rvw
      (rst_no, id, cont, cdt, score, useyn)
    VALUES (
      #{rst_no},
      #{id},
      #{cont},
      now(),
      #{score},
      'Y'
      )
    ON DUPLICATE KEY 
    UPDATE
      <trim suffixOverrides=",">
        <if test="rst_no != null">rst_no = #{rst_no},</if>
        <if test="id != null">id = #{id},</if>
        <if test="cont != null">cont = #{cont},</if>
        <if test="score != null">score = #{score},</if>
      </trim>
  </insert>
  
  <select id="getRvwList" parameterType="int" resultType="rvw">
    SELECT rvw_no, id, cont, cdt, score
    FROM rvw
    WHERE useyn = 'Y'
    AND rst_no = #{rst_no}
  </select>
  

</mapper>